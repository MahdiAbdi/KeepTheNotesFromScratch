{"version":3,"sources":["App.js","index.js"],"names":["App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","provider","logout","firebase","auth","signOut","login","signInWithPopup","then","result","handleClose","catch","error","handleMenu","setState","open","state","docId","note","token","user","anchorEl","_this2","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","GoogleAuthProvider","console","log","onAuthStateChanged","db","firestore","settings","timestampsInSnapshots","collection","where","email","onSnapshot","snapshot","docChanges","forEach","change","type","doc","id","data","content","e","update","target","value","add","author","classes","_this$state","isSignedIn","Boolean","theme","createMuiTheme","typography","fontFamily","react_default","a","createElement","MuiThemeProvider_default","className","root","AppBar_default","position","Toolbar_default","IconButton_default","menuButton","color","aria-label","Menu_default","Typography_default","variant","grow","style","width","display","flexDirection","justifyContent","alignItems","displayName","Avatar_default","onClick","bind","alt","src","photoURL","avatar","aria-owns","undefined","aria-haspopup","AccountCircle_default","core_Menu_default","anchorOrigin","vertical","horizontal","transformOrigin","onClose","MenuItem_default","TextField_default","multiline","rows","onChange","autoSave","textField","margin","Component","withStyles","createStyles","flexGrow","marginLeft","marginRight","height","ReactDOM","render","src_App","document","getElementById"],"mappings":"yhBAmBMA,sBACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAYRQ,SAAW,KAbQP,EA0EnBQ,OAAS,WACMC,IAASC,OACjBC,WA5EYX,EA+EnBY,MAAQ,WACOH,IAASC,OAEnBG,gBAAgBb,EAAKO,UACrBO,KAAK,SAAAC,GACJf,EAAKgB,gBAENC,MAAM,SAAAC,OAtFQlB,EAyFnBmB,WAAa,WACXnB,EAAKoB,SAAS,CAAEC,MAAM,KA1FLrB,EA6FnBgB,YAAc,WACZhB,EAAKoB,SAAS,CAAEC,MAAM,KA5FtBrB,EAAKsB,MAAQ,CACXC,MAAO,KACPC,KAAM,GACNC,MAAO,KACPC,KAAM,KACNR,MAAO,KACPS,SAAU,KACVN,MAAM,GATSrB,mFAeC,IAAA4B,EAAAzB,KAUlBM,IAASoB,cATM,CACbC,OAAQ,0CACRC,WAAY,qCACZC,YAAa,4CACbC,UAAW,qBACXC,cAAe,iCACfC,kBAAmB,iBAKrBhC,KAAKI,SAAW,IAAIE,IAASC,KAAK0B,mBAClCC,QAAQC,IAAInC,KAAKI,UACJE,IAASC,OACjB6B,mBAAmB,SAAAb,GACtB,GAAIA,EAAM,CACRE,EAAKR,SAAS,CAAEM,SAChB,IAAMc,EAAK/B,IAASgC,YACpBD,EAAGE,SAAS,CAAEC,uBAAuB,IACrCH,EAAGI,WAAW,SACXC,MAAM,SAAU,KAAMnB,EAAKoB,OAC3BC,WAAW,SAAAC,GACIA,EAASC,aACfC,QAAQ,SAAAC,GACM,UAAhBA,EAAOC,KACTxB,EAAKR,SAAS,CAAEG,MAAO4B,EAAOE,IAAIC,KACT,YAAhBH,EAAOC,MAChBxB,EAAKR,SAAS,CAAEI,KAAM,KAExBI,EAAKR,SAAS,CAAEI,KAAM2B,EAAOE,IAAIE,OAAOC,mBAI9C5B,EAAKR,SAAS,CACZG,MAAO,KACPC,KAAM,GACNC,MAAO,KACPC,KAAM,KACNR,MAAO,0CAMNuC,GACP,IAAMjB,EAAK/B,IAASgC,YAChBtC,KAAKmB,MAAMC,MACbiB,EAAGI,WAAW,SACXS,IAAIlD,KAAKmB,MAAMC,OACfmC,OAAO,CAAEF,QAASC,EAAEE,OAAOC,QAE9BpB,EAAGI,WAAW,SAASiB,IAAI,CACzBC,OAAQ3D,KAAKmB,MAAMI,KAAKoB,MACxBU,QAASC,EAAEE,OAAOC,yCA4Bf,IACCG,EAAY5D,KAAKJ,MAAjBgE,QADDC,EAE0B7D,KAAKmB,MAA9BK,EAFDqC,EAECrC,SAAUD,EAFXsC,EAEWtC,KAAML,EAFjB2C,EAEiB3C,KAClB4C,EAAaC,QAAQxC,GAC3BW,QAAQC,IAAI2B,EAAYvC,GACxB,IAAMyC,EAAQC,IAAe,CAC3BC,WAAY,CACVC,WAAY,eAGhB,OACEC,EAAAC,EAAAC,cAACC,EAAAF,EAAD,CAAkBL,MAAOA,GACvBI,EAAAC,EAAAC,cAAA,OAAKE,UAAWZ,EAAQa,MACtBL,EAAAC,EAAAC,cAACI,EAAAL,EAAD,CAAQM,SAAS,UACfP,EAAAC,EAAAC,cAACM,EAAAP,EAAD,KACED,EAAAC,EAAAC,cAACO,EAAAR,EAAD,CACEG,UAAWZ,EAAQkB,WACnBC,MAAM,UACNC,aAAW,QAEXZ,EAAAC,EAAAC,cAACW,EAAAZ,EAAD,OAEFD,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CAAYc,QAAQ,KAAKJ,MAAM,UAAUP,UAAWZ,EAAQwB,MAA5D,UAGAhB,EAAAC,EAAAC,cAAA,WACGR,EACCM,EAAAC,EAAAC,cAAA,OACEe,MAAO,CACLC,MAAO,OACPC,QAAS,OACTC,cAAe,MACfC,eAAgB,gBAChBC,WAAY,WAGdtB,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEU,MAAM,UACNM,MAAO,CAAEE,QAAS,gBAClBJ,QAAQ,QACRX,UAAWZ,EAAQwB,MAElB7D,EAAKoE,aAERvB,EAAAC,EAAAC,cAACsB,EAAAvB,EAAD,CACEgB,MAAO,CAAEE,QAAS,gBAClBM,QAAS7F,KAAKgB,WAAW8E,KAAK9F,MAC9B+F,IAAI,aACJC,IAAKzE,EAAK0E,SACVzB,UAAWZ,EAAQsC,UAIvB9B,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACY,EAAAb,EAAD,CACEU,MAAM,UACNM,MAAO,CAAEE,QAAS,gBAClBJ,QAAQ,QACRX,UAAWZ,EAAQwB,MAJrB,gBAQAhB,EAAAC,EAAAC,cAACO,EAAAR,EAAD,CACE8B,YAAWjF,EAAO,mBAAgBkF,EAClCC,gBAAc,OACdR,QAAS7F,KAAKS,MAAMqF,KAAK9F,MACzB+E,MAAM,WAENX,EAAAC,EAAAC,cAACgC,EAAAjC,EAAD,SAMRP,GACAM,EAAAC,EAAAC,cAACiC,EAAAlC,EAAD,CACIlB,GAAG,cACH3B,SAAUA,EACVgF,aAAc,CACZC,SAAU,MACVC,WAAY,SAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAEdxF,KAAMlB,KAAKmB,MAAMD,KACjB0F,QAAS5G,KAAKa,aAEhBuD,EAAAC,EAAAC,cAACuC,EAAAxC,EAAD,CAAUwB,QAAS7F,KAAKK,OAAOyF,KAAK9F,OAApC,cAOL8D,EACCM,EAAAC,EAAAC,cAACwC,EAAAzC,EAAD,CACElB,GAAG,8BACH4D,WAAS,EACTC,KAAM,GACNvD,MAAOzD,KAAKmB,MAAME,KAClB4F,SAAUjH,KAAKkH,SAASpB,KAAK9F,MAC7BwE,UAAWZ,EAAQuD,UACnBC,OAAO,SACPjC,QAAQ,aAER,cA7MIkC,cAuOHC,MAnBA,SAAAtD,GAAK,OAClBuD,IAAa,CACX9C,KAAM,CACJ+C,SAAU,GAEZpC,KAAM,CACJoC,SAAU,GAEZ1C,WAAY,CACV2C,YAAa,GACbC,YAAa,IAEfP,UAAW,CACT7B,MAAO,OACPqC,OAAQ,OACRxD,WAAY,+BAIHmD,CAAmB3H,GCrPlCiI,IAASC,OAAOzD,EAAAC,EAAAC,cAACwD,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.bd7cd109.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport \"firebase/firestore\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport createStyles from \"@material-ui/core/styles/createStyles\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport MuiThemeProvider from \"@material-ui/core/styles/MuiThemeProvider\";\r\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\r\nimport \"./fonts/fira_code.css\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      docId: null,\r\n      note: \"\",\r\n      token: null,\r\n      user: null,\r\n      error: null,\r\n      anchorEl: null,\r\n      open: false\r\n    };\r\n  }\r\n\r\n  provider = null;\r\n\r\n  componentDidMount() {\r\n    const config = {\r\n      apiKey: \"AIzaSyB3GYcRcn40zuiUOL9oEiXC2pE7RWBPX8U\",\r\n      authDomain: \"keepthenotes-bf133.firebaseapp.com\",\r\n      databaseURL: \"https://keepthenotes-bf133.firebaseio.com\",\r\n      projectId: \"keepthenotes-bf133\",\r\n      storageBucket: \"keepthenotes-bf133.appspot.com\",\r\n      messagingSenderId: \"682012368542\"\r\n    };\r\n\r\n    firebase.initializeApp(config);\r\n\r\n    this.provider = new firebase.auth.GoogleAuthProvider();\r\n    console.log(this.provider);\r\n    const auth = firebase.auth();\r\n    auth.onAuthStateChanged(user => {\r\n      if (user) {\r\n        this.setState({ user });\r\n        const db = firebase.firestore();\r\n        db.settings({ timestampsInSnapshots: true });\r\n        db.collection(\"notes\")\r\n          .where(\"author\", \"==\", user.email)\r\n          .onSnapshot(snapshot => {\r\n            let changes = snapshot.docChanges();\r\n            changes.forEach(change => {\r\n              if (change.type === \"added\") {\r\n                this.setState({ docId: change.doc.id });\r\n              } else if (change.type === \"removed\") {\r\n                this.setState({ note: \"\" });\r\n              }\r\n              this.setState({ note: change.doc.data().content });\r\n            });\r\n          });\r\n      } else {\r\n        this.setState({\r\n          docId: null,\r\n          note: \"\",\r\n          token: null,\r\n          user: null,\r\n          error: null\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  autoSave(e) {\r\n    const db = firebase.firestore();\r\n    if (this.state.docId) {\r\n      db.collection(\"notes\")\r\n        .doc(this.state.docId)\r\n        .update({ content: e.target.value });\r\n    } else {\r\n      db.collection(\"notes\").add({\r\n        author: this.state.user.email,\r\n        content: e.target.value\r\n      });\r\n    }\r\n  }\r\n\r\n  logout = () => {\r\n    const auth = firebase.auth();\r\n    auth.signOut();\r\n  };\r\n\r\n  login = () => {\r\n    const auth = firebase.auth();\r\n    auth\r\n      .signInWithPopup(this.provider)\r\n      .then(result => {\r\n        this.handleClose();\r\n      })\r\n      .catch(error => {});\r\n  };\r\n\r\n  handleMenu = () => {\r\n    this.setState({ open: true });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { anchorEl, user, open } = this.state;\r\n    const isSignedIn = Boolean(user);\r\n    console.log(isSignedIn, user);\r\n    const theme = createMuiTheme({\r\n      typography: {\r\n        fontFamily: \"Fira Code\"\r\n      }\r\n    });\r\n    return (\r\n      <MuiThemeProvider theme={theme}>\r\n        <div className={classes.root}>\r\n          <AppBar position=\"static\">\r\n            <Toolbar>\r\n              <IconButton\r\n                className={classes.menuButton}\r\n                color=\"inherit\"\r\n                aria-label=\"Menu\"\r\n              >\r\n                <MenuIcon />\r\n              </IconButton>\r\n              <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n                ToNote\r\n              </Typography>\r\n              <div>\r\n                {isSignedIn ? (\r\n                  <div\r\n                    style={{\r\n                      width: \"110%\",\r\n                      display: \"flex\",\r\n                      flexDirection: \"row\",\r\n                      justifyContent: \"space-between\",\r\n                      alignItems: \"center\"\r\n                    }}\r\n                  >\r\n                    <Typography\r\n                      color=\"inherit\"\r\n                      style={{ display: \"inline-block\" }}\r\n                      variant=\"body2\"\r\n                      className={classes.grow}\r\n                    >\r\n                      {user.displayName}\r\n                    </Typography>\r\n                    <Avatar\r\n                      style={{ display: \"inline-block\" }}\r\n                      onClick={this.handleMenu.bind(this)}\r\n                      alt=\"Remy Sharp\"\r\n                      src={user.photoURL}\r\n                      className={classes.avatar}\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div>\r\n                    <Typography\r\n                      color=\"inherit\"\r\n                      style={{ display: \"inline-block\" }}\r\n                      variant=\"body2\"\r\n                      className={classes.grow}\r\n                    >\r\n                      Login -->\r\n                    </Typography>\r\n                    <IconButton\r\n                      aria-owns={open ? \"menu-appbar\" : undefined}\r\n                      aria-haspopup=\"true\"\r\n                      onClick={this.login.bind(this)}\r\n                      color=\"inherit\"\r\n                    >\r\n                      <AccountCircle />\r\n                    </IconButton>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              {\r\n              isSignedIn && (\r\n              <Menu\r\n                  id=\"menu-appbar\"\r\n                  anchorEl={anchorEl}\r\n                  anchorOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"right\"\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"right\"\r\n                  }}\r\n                  open={this.state.open}\r\n                  onClose={this.handleClose}\r\n              >\r\n                <MenuItem onClick={this.logout.bind(this)}>\r\n                  SignOut\r\n                </MenuItem>\r\n              </Menu>\r\n              )}\r\n            </Toolbar>\r\n          </AppBar>\r\n          {isSignedIn ? (\r\n            <TextField\r\n              id=\"outlined-multiline-flexible\"\r\n              multiline\r\n              rows={40}\r\n              value={this.state.note}\r\n              onChange={this.autoSave.bind(this)}\r\n              className={classes.textField}\r\n              margin=\"normal\"\r\n              variant=\"outlined\"\r\n            />\r\n          ) : null}\r\n        </div>\r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = theme =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1\r\n    },\r\n    grow: {\r\n      flexGrow: 1\r\n    },\r\n    menuButton: {\r\n      marginLeft: -12,\r\n      marginRight: 20\r\n    },\r\n    textField: {\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      fontFamily: \"Comic Sans MS !important\"\r\n    }\r\n  });\r\n\r\nexport default withStyles(styles)(App);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}